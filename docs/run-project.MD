# Como Executar o Projeto

Este guia explica como configurar e executar o projeto de testes de API localmente.

## Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado:

- **Node.js** (vers√£o 18 ou superior)
- **npm** ou **yarn** (gerenciador de pacotes)
- **Git** (para clonar o reposit√≥rio)

## Configura√ß√£o por Sistema Operacional

### macOS

#### Instala√ß√£o do Node.js

**Op√ß√£o 1: Usando Homebrew (recomendado)**
```bash
# Instalar Homebrew (se ainda n√£o tiver)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Instalar Node.js
brew install node
```

**Op√ß√£o 2: Download direto**
- Acesse [nodejs.org](https://nodejs.org/) e baixe o instalador para macOS
- Execute o instalador e siga as instru√ß√µes

#### Verificar instala√ß√£o
```bash
node --version
npm --version
```

#### Instala√ß√£o do Playwright
Ap√≥s instalar as depend√™ncias do projeto, instale os browsers (opcional para testes de API):
```bash
npm install
npx playwright install
```

**Nota**: Para testes de API, os browsers n√£o s√£o obrigat√≥rios, mas podem ser √∫teis para testes integrados.

### Linux

#### Instala√ß√£o do Node.js

**Ubuntu/Debian:**
```bash
# Atualizar pacotes
sudo apt update

# Instalar Node.js e npm
sudo apt install nodejs npm

# Ou instalar vers√£o mais recente via NodeSource
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs
```

**Fedora/RHEL/CentOS:**
```bash
# Instalar Node.js e npm
sudo dnf install nodejs npm

# Ou via NodeSource
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo dnf install -y nodejs
```

**Arch Linux:**
```bash
sudo pacman -S nodejs npm
```

### Windows

#### Instala√ß√£o do Node.js

**Op√ß√£o 1: Download direto (recomendado)**
- Acesse [nodejs.org](https://nodejs.org/)
- Baixe o instalador LTS para Windows
- Execute o instalador e siga as instru√ß√µes
- Certifique-se de marcar a op√ß√£o "Add to PATH" durante a instala√ß√£o

**Op√ß√£o 2: Usando Chocolatey**
```powershell
# Instalar Chocolatey (se ainda n√£o tiver)
# Execute no PowerShell como Administrador:
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

# Instalar Node.js
choco install nodejs
```

**Op√ß√£o 3: Usando Winget**
```powershell
winget install OpenJS.NodeJS.LTS
```

#### Verificar instala√ß√£o
Abra o **PowerShell** ou **Prompt de Comando** e execute:
```powershell
node --version
npm --version
```

## Instala√ß√£o

### 1. Clone o reposit√≥rio

```bash
git clone <repository-url>
cd dog-api-tests
```

### 2. Instale as depend√™ncias

```bash
npm install
```

Este comando instalar√° todas as depend√™ncias do projeto listadas no `package.json`, incluindo:
- `@playwright/test` - Framework de testes
- `typescript` - Compilador TypeScript
- `@types/node` - Tipos TypeScript para Node.js
- `allure-playwright` - Integra√ß√£o com Allure

### 3. Instale os browsers do Playwright (opcional)

Para testes de API, os browsers n√£o s√£o obrigat√≥rios, mas podem ser √∫teis:

```bash
npx playwright install
```

## Executando os Testes Localmente

### Executar todos os testes

```bash
npm test
```

ou

```bash
npx playwright test
```

### Executar testes em modo debug

```bash
npm run test:debug
```

Abre o Playwright Inspector para debug interativo dos testes.

### Executar testes espec√≠ficos

```bash
# Apenas testes de lista de ra√ßas
npx playwright test tests/breeds.list.test.ts

# Apenas testes de imagens aleat√≥rias
npx playwright test tests/random.image.test.ts

# Apenas testes de imagens de ra√ßa espec√≠fica
npx playwright test tests/breed.images.test.ts
```

### Executar testes com filtro

```bash
npx playwright test --grep "deve retornar status 200"
```

### Visualizar relat√≥rio de testes

Ap√≥s executar os testes, voc√™ pode visualizar o relat√≥rio HTML:

```bash
npm run test:report
```

O relat√≥rio ser√° aberto automaticamente no navegador, mostrando:
- Resultados dos testes (passou/falhou)
- Tempo de execu√ß√£o
- Traces para debug
- Screenshots (se houver falhas)

## Estrutura de Resultados

Ap√≥s a execu√ß√£o dos testes, os seguintes diret√≥rios ser√£o criados:

- **`test-results/`**: Cont√©m resultados JSON, screenshots (se houver falhas) e traces
- **`playwright-report/`**: Cont√©m o relat√≥rio HTML interativo
- **`allure-results/`**: Cont√©m resultados do Allure (se configurado)

## Execu√ß√£o via Docker

Para executar os testes em um ambiente containerizado com Docker, consulte a documenta√ß√£o completa:

üìÑ **[Execu√ß√£o via Docker](./docker-run.MD)**

A documenta√ß√£o de Docker inclui:
- Como construir a imagem Docker
- Como executar testes no Docker
- Como usar docker-compose
- Troubleshooting e solu√ß√µes de problemas comuns
- Comandos para rebuild da imagem

**Comandos r√°pidos:**

```bash
# Executar testes com Docker Compose
npm run test:docker

# Limpar containers e volumes
npm run test:docker:clean
```

**Vantagens da execu√ß√£o via Docker:**
- Ambiente isolado e consistente
- N√£o requer instala√ß√£o local dos browsers
- F√°cil integra√ß√£o com CI/CD
- Mesmo ambiente em diferentes m√°quinas

## GitHub Actions

O projeto inclui um workflow do GitHub Actions que executa automaticamente os testes em:
- Push para branch `main`
- Pull Requests para qualquer branch
- Execu√ß√£o manual via `workflow_dispatch`

Os resultados s√£o salvos como artefatos e podem ser baixados ap√≥s a execu√ß√£o.

## Estrutura do Projeto

```
dog-api-tests/
‚îú‚îÄ‚îÄ tests/              # Arquivos de teste
‚îú‚îÄ‚îÄ services/           # API Clients (Services)
‚îú‚îÄ‚îÄ fixtures/           # Fixtures do Playwright
‚îú‚îÄ‚îÄ utils/              # Utilit√°rios e validadores
‚îú‚îÄ‚îÄ docs/               # Documenta√ß√£o
‚îú‚îÄ‚îÄ Dockerfile          # Imagem Docker
‚îú‚îÄ‚îÄ docker-compose.yml  # Configura√ß√£o Docker Compose
‚îî‚îÄ‚îÄ playwright.config.ts # Configura√ß√£o do Playwright
```

## Troubleshooting

### Erro: "Cannot find module"
```bash
npm install
```

### Erro de permiss√£o (Docker)
```bash
sudo chown -R $USER:$USER test-results playwright-report allure-results
```

### Limpar cache do npm
```bash
npm cache clean --force
```

### Verificar vers√£o do Node.js
```bash
node --version  # Deve ser 18 ou superior
```
